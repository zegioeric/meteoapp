{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { getForecast } from '../api/openweather';\n\nconst GetWeather = () => {\n  _s();\n\n  const [position, setPosition] = useState({});\n  const [error, setError] = useState(null);\n\n  const onChange = ({\n    coords\n  }) => {\n    setPosition({\n      latitude: coords.latitude,\n      longitude: coords.longitude\n    });\n  };\n\n  const onError = error => {\n    setError(error.message);\n  };\n\n  const fetchDataForecast = async data => {\n    console.log(position); // const resForecast = await getForecast(data)\n    // console.log(resForecast)\n  };\n\n  useEffect(() => {\n    const geo = navigator.geolocation;\n\n    if (!geo) {\n      setError('Geolocation is not supported');\n      return;\n    }\n\n    const watcher = geo.watchPosition(onChange, onError);\n    return () => geo.clearWatch(watcher);\n    fetchDataForecast();\n  }, []);\n  return { ...position,\n    error\n  };\n};\n\n_s(GetWeather, \"dynHhIjHiH1gzjmYywOPM1LY5S8=\");\n\n_c = GetWeather;\nexport default GetWeather;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetWeather\");","map":{"version":3,"sources":["/home/eric/projects/react/meteoapp/src/components/GetWeather.js"],"names":["useState","useEffect","getForecast","GetWeather","position","setPosition","error","setError","onChange","coords","latitude","longitude","onError","message","fetchDataForecast","data","console","log","geo","navigator","geolocation","watcher","watchPosition","clearWatch"],"mappings":";;AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAASC,WAAT,QAA4B,oBAA5B;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AAEvB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,IAAD,CAAlC;;AAEA,QAAMQ,QAAQ,GAAG,CAAC;AAACC,IAAAA;AAAD,GAAD,KAAc;AAC7BJ,IAAAA,WAAW,CAAC;AACVK,MAAAA,QAAQ,EAAED,MAAM,CAACC,QADP;AAEVC,MAAAA,SAAS,EAAEF,MAAM,CAACE;AAFR,KAAD,CAAX;AAID,GALD;;AAOA,QAAMC,OAAO,GAAIN,KAAD,IAAW;AACzBC,IAAAA,QAAQ,CAACD,KAAK,CAACO,OAAP,CAAR;AACD,GAFD;;AAKA,QAAMC,iBAAiB,GAAG,MAAOC,IAAP,IAAgB;AACxCC,IAAAA,OAAO,CAACC,GAAR,CAAYb,QAAZ,EADwC,CAExC;AACA;AACD,GAJD;;AAMAH,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMiB,GAAG,GAAGC,SAAS,CAACC,WAAtB;;AACA,QAAI,CAACF,GAAL,EAAU;AACRX,MAAAA,QAAQ,CAAC,8BAAD,CAAR;AACA;AACD;;AACD,UAAMc,OAAO,GAAGH,GAAG,CAACI,aAAJ,CAAkBd,QAAlB,EAA4BI,OAA5B,CAAhB;AACA,WAAO,MAAMM,GAAG,CAACK,UAAJ,CAAeF,OAAf,CAAb;AAEAP,IAAAA,iBAAiB;AAClB,GAVQ,EAUN,EAVM,CAAT;AAaA,SAAO,EAAC,GAAGV,QAAJ;AAAcE,IAAAA;AAAd,GAAP;AACD,CArCD;;GAAMH,U;;KAAAA,U;AAuCN,eAAeA,UAAf","sourcesContent":["import {useState, useEffect} from 'react';\nimport { getForecast } from '../api/openweather';\n\nconst GetWeather = () => {\n\n  const [position, setPosition] = useState({});\n  const [error, setError] = useState(null);\n\n  const onChange = ({coords}) => {\n    setPosition({\n      latitude: coords.latitude,\n      longitude: coords.longitude,\n    });\n  };\n\n  const onError = (error) => {\n    setError(error.message);\n  };\n\n\n  const fetchDataForecast = async (data) => {\n    console.log(position)\n    // const resForecast = await getForecast(data)\n    // console.log(resForecast)\n  }\n\n  useEffect(() => {\n    const geo = navigator.geolocation;\n    if (!geo) {\n      setError('Geolocation is not supported');\n      return;\n    }\n    const watcher = geo.watchPosition(onChange, onError);\n    return () => geo.clearWatch(watcher);\n\n    fetchDataForecast()\n  }, []);\n\n\n  return {...position, error};\n}\n\nexport default GetWeather\n\n\n\n"]},"metadata":{},"sourceType":"module"}